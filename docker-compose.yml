version: '3'
services:
  db:
    image: 'mongo'
    ports:
      - '27017:27017'
    volumes:
      - '/data/db:/data/db'

  app:
    image: 'coretest:latest'
    build:
      context: .
      dockerfile: ./docker/Dockerfile-serverjs
    ports:
      - '8080-8085:8080'
    restart: 'on-failure'
    depends_on:
      - db
    links:
      - db

  frontend:
    image: 'corefront:latest'
    build:
      context: .
      dockerfile: ./docker/Dockerfile-ScePage
    ports:
      - '3000-3005:3000'
    restart: 'on-failure'
    command: 'npm start'
    links:
      - app
